# Consilience API Environment Configuration
# Copy this file to .env and fill in your actual values
# SECURITY: Never commit .env with real credentials to version control

# ============================================================================
# ENVIRONMENT SELECTION
# ============================================================================
# Set to one of: development, staging, production
ENVIRONMENT=development

# Debug mode (SECURITY WARNING: Must be False in production)
# Only set to True for local testing - enables JWT validation bypass
DEBUG=false

# ============================================================================
# NEON DATABASE CONFIGURATION
# ============================================================================
# Format: postgresql+asyncpg://[user]:[password]@[host]/[database]
# 
# DEVELOPMENT (Use localhost or Neon development endpoint):
# DATABASE_URL=postgresql+asyncpg://neondb_owner:password@localhost:5432/consilience_dev
# 
# STAGING (Use Neon staging project):
# DATABASE_URL=postgresql+asyncpg://neondb_owner:password@staging-endpoint.neon.tech/consilience_staging
# 
# PRODUCTION (Use Neon production project with SSL):
# DATABASE_URL=postgresql+asyncpg://neondb_owner:password@production-endpoint.neon.tech/consilience_prod?sslmode=require
#
# NOTE: Neon automatically provides connection pooling via pgBouncer
# No need for external pooling solutions

DATABASE_URL=postgresql+asyncpg://neondb_owner:your_password_here@localhost:5432/consilience_dev

# ============================================================================
# NEON AUTH CONFIGURATION
# ============================================================================
# Neon authentication endpoints for JWT validation
# These should match your Neon project's auth configuration

# Auth server URL (for obtaining tokens)
AUTH_URL=https://neon.example.com/auth

# JWKS URL (for validating JWT signatures)
JWKS_URL=https://neon.example.com/.well-known/jwks.json

# ============================================================================
# OPENROUTER API CONFIGURATION
# ============================================================================
# OpenRouter API key for LLM calls
# Get your API key from: https://openrouter.ai/keys

OPENROUTER_API_KEY=sk_live_your_openrouter_key_here

# Optional: Specific model for research, or let defaults apply
# OPENROUTER_MODEL=openai/gpt-4-turbo-preview

# ============================================================================
# STRIPE PAYMENT CONFIGURATION (OPTIONAL)
# ============================================================================
# Stripe API keys for payment processing
# Get your keys from: https://dashboard.stripe.com/apikeys

STRIPE_SECRET_KEY=sk_test_your_stripe_secret_key
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret


# ============================================================================
# APPLICATION CONFIGURATION
# ============================================================================
# Frontend URL for CORS
FRONTEND_URL=http://localhost:3000

# API server port
API_PORT=8000

# ============================================================================
# LLM CONFIGURATION
# ============================================================================
# Request timeout settings
LLM_CALL_TIMEOUT_SECONDS=60
LLM_AGENT_TIMEOUT_SECONDS=180

# Retry configuration
CONSILIENCE_MAX_RETRIES=3
CONSILIENCE_INITIAL_RETRY_DELAY_SECONDS=1.0
CONSILIENCE_MAX_RETRY_DELAY_SECONDS=30.0
CONSILIENCE_BACKOFF_MULTIPLIER=2.0
CONSILIENCE_JITTER_ENABLED=true

# Circuit breaker
CONSILIENCE_CIRCUIT_BREAKER_FAILURE_THRESHOLD=5
CONSILIENCE_CIRCUIT_BREAKER_RESET_TIMEOUT_SECONDS=300

# ============================================================================
# ENVIRONMENT-SPECIFIC NOTES
# ============================================================================
# 
# DEVELOPMENT:
#   - Use localhost for DATABASE_URL or Neon development compute
#   - DEBUG=false (or set to true for local testing with JWT bypass)
#   - FRONTEND_URL=http://localhost:3000
#   - Use test Stripe/OpenRouter keys
# 
# STAGING:
#   - Use Neon staging project
#   - DEBUG=false
#   - FRONTEND_URL=https://staging.consilience.example.com
#   - Use test Stripe keys with staging endpoint
# 
# PRODUCTION:
#   - Use Neon production project with SSL (sslmode=require)
#   - DEBUG=false (CRITICAL: Must be false)
#   - FRONTEND_URL=https://consilience.example.com
#   - Use live Stripe keys
#   - Use live OpenRouter keys
#   - Enable HTTPS only
#   - Set strong Secret keys
# 
# ============================================================================
